<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI Product Assistant</title>
  <style>
    body { font-family: Arial, sans-serif; background-color: #0e0e0e; color: #f5f5f5; padding: 40px; }
    input, button { padding: 10px; font-size: 1em; border-radius: 6px; border: none; }
    input { width: 60%; }
    button { background-color: #e2b714; color: #0e0e0e; margin-left: 10px; cursor: pointer; }
    pre { background-color: #1a1a1a; padding: 20px; border-radius: 8px; margin-top: 20px; white-space: pre-wrap; word-wrap: break-word; }
  </style>
</head>
<body>
  <h1>AI Product Assistant</h1>
  <p>Enter an idea and watch it turn into a structured product brief.</p>
  <input id="prompt" placeholder="e.g., AI tool for luxury car sales"/>
  <button onclick="runDemo()">Generate Brief</button>
  <pre id="out"></pre>

  <script>
  const API_URL = "https://a8ad6bfd-0b9e-4c04-b86b-ee6f5673b396-00-3j9vlmht90fsh.picard.replit.dev/generate";

  function mdEscape(s){return (s||"").replace(/[&<>]/g, c=>({'&':'&amp;','<':'&lt;','>':'&gt;'}[c]))}

  async function runDemo(){
    const p = document.getElementById('prompt').value.trim() || 'AI for post-sale follow-ups in automotive'
    const out = document.getElementById('out')
    out.textContent = 'Thinking...'

    try {
      const res = await fetch(API_URL, {
        method: 'POST',
        headers: {'Content-Type':'application/json'},
        body: JSON.stringify({ prompt: p })
      })
      if(!res.ok){ throw new Error(`HTTP ${res.status}`) }
      const data = await res.json()

      const b = data.brief || {}
      const list = arr => (arr||[]).map(x=>`- ${x}`).join('\n')

      out.textContent = `
Product Brief
-------------
User prompt: ${mdEscape(data.prompt || p)}

Problem
${list(b.problem)}

Users
${list(b.users)}

Solution (v1)
${list(b.solution)}

Value
${list(b.value)}

Risks
${list(b.risks)}

Next Actions
${list(b.next_actions)}
      `.trim()
    } catch(err){
      out.textContent = 'Error: ' + err.message
    }
  }
  </script>
</body>
</html>
